name: ma-fp-stumpf

#mgmt:
  #network: fixedips
  #ipv4_subnet: 172.100.100.0/24
  #ipv6_subnet: 2001:172:100:100::/80

topology:

  kinds:
    linux:
      image: wbitt/network-multitool:alpine-extra
    ceos:
      image: ceos:4.33.0F
    nokia_srlinux:
      image: ghcr.io/nokia/srlinux

  nodes:
    r1:
      #kind: ceos
      #image: ceos:4.33.0F
      kind: nokia_srlinux
      group: routers
      #startup-config: config/acn-dcn-scenario1-mstp-ceos1.cfg
      #mgmt_ipv4: 172.100.100.10
      #mgmt_ipv6: 2001:172:100:100::10
    r2:
      #kind: ceos
      #image: ceos:4.33.0F
      kind: nokia_srlinux
      group: routers
      #startup-config: config/acn-dcn-scenario1-mstp-ceos2.cfg
      #mgmt_ipv4: 172.100.100.20
      #mgmt_ipv6: 2001:172:100:100::20
    r3:
      #kind: ceos
      #image: ceos:4.33.0F
      kind: nokia_srlinux
      group: routers
      #startup-config: config/acn-dcn-scenario1-mstp-ceos3.cfg
      #mgmt_ipv4: 172.100.100.30
      #mgmt_ipv6: 2001:172:100:100::30
    h1:
      kind: linux
      group: hosts
      exec:
        - ip addr add 10.0.1.101/24 dev eth1
        - ip route del default
        - ip route add default via 10.0.1.1
    h2:
      kind: linux
      group: hosts
      exec:
        - ip addr add 10.0.2.102/24 dev eth1
        - ip route del default
        - ip route add default via 10.0.2.1
    h3:
      kind: linux
      group: hosts
      exec:
        - ip addr add 10.0.3.103/24 dev eth1
        - ip route del default
        - ip route add default via 10.0.3.1

  links:
    # cEOS
    #- endpoints: ["r1:eth1","r2:eth1"]
    #- endpoints: ["r1:eth2","r3:eth1"]
    #- endpoints: ["r2:eth2","r3:eth2"]
    #- endpoints: ["r1:eth3","h1:eth1"]
    #- endpoints: ["r2:eth3","h2:eth1"]
    #- endpoints: ["r3:eth3","h3:eth1"]

    # SR Linux
    - endpoints: ["r1:ethernet-1/1","r2:ethernet-1/1"]
    - endpoints: ["r1:ethernet-1/2","r3:ethernet-1/1"]
    - endpoints: ["r2:ethernet-1/2","r3:ethernet-1/2"]
    - endpoints: ["r1:ethernet-1/3","h1:eth1"]
    - endpoints: ["r2:ethernet-1/3","h2:eth1"]
    - endpoints: ["r3:ethernet-1/3","h3:eth1"]
